<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Perl | ni-blog]]></title>
  <link href="http://orihubon.com/blog/categories/perl/atom.xml" rel="self"/>
  <link href="http://orihubon.com/"/>
  <updated>2014-11-06T11:00:10+09:00</updated>
  <id>http://orihubon.com/</id>
  <author>
    <name><![CDATA[niku4i]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Perl環境構築作りのチート]]></title>
    <link href="http://orihubon.com/blog/2013/02/25/perl-dev_env_and_deploy/"/>
    <updated>2013-02-25T09:30:00+09:00</updated>
    <id>http://orihubon.com/blog/2013/02/25/perl-dev_env_and_deploy</id>
    <content type="html"><![CDATA[<p>ステージや本番での環境構築まわりについて調べてみた。</p>

<!--more-->


<p>調べたかったことはこのスライドにまとまっていた。<a href="http://www.slideshare.net/ImaiHayato/niigatapm-1">モダンかもしれないPerlウェブアプリケーション開発入門 &ndash; Nigata.pm teck talk#1</a></p>

<p>以下、自分用にメモします。</p>

<h3>開発環境</h3>

<pre><code>$ curl -kL http://install.perlbrew.pl | bash
$ echo 'source ~/perl5/perlbrew/etc/bashrc' &gt;&gt; ~/.bash_profile
$ source ~/.bash_profile
$ perlbrew install perl-5.17.9
$ perlbrew switch perl-5.17.9
$ perlbrew install-cpanm
$ cpanm carton
$ cpanm proclet # 必要であれば
</code></pre>

<h3>デプロイ先</h3>

<pre><code>$ sudo useradd -m myapp &amp;&amp; sudo su - myapp
# perl環境構築(略)
myapp$ git clone url myapp
myapp$ cd myapp
myapp$ carton install
myapp$ carton exec -- prove
</code></pre>

<h3>daemontoolsスクリプト</h3>

<p>```</p>

<pre><code>#!/bin/sh
export HOME=/home/myapp
export PLACK_ENV=production
cd $HOME/myappexec
exec setuidgid myapp ./script/start.sh
</code></pre>

<p>```</p>

<p>```</p>

<pre><code>source $HOME/perl5/perlbrew/etc/bashrc
carton exec -- myapp
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Procletを使ってみた]]></title>
    <link href="http://orihubon.com/blog/2013/02/23/proclet/"/>
    <updated>2013-02-23T13:34:00+09:00</updated>
    <id>http://orihubon.com/blog/2013/02/23/proclet</id>
    <content type="html"><![CDATA[<p>最近、仕事で小さなブロジェクトでレガシに作られたCGIのアプリケーションをちまちまとモダンにしています:)
RubyでいうところのForeman、PerlのProcletを使ってみました!!</p>

<p>インストール</p>

<pre><code>$ cpanm Proclet
</code></pre>

<p>簡単ですね!</p>

<p>Procfileを書く。</p>

<pre><code>$ vim Procfile
web: carton exec -Ilib -- plackup -r app.psgi
</code></pre>

<p>ほかにworkerなど立ち上げるプロセスがあれば行区切りで書けばOK。</p>

<p>起動させてみる</p>

<pre><code>$ proclet start --color
13:33:16 web.1      | Watching ./lib app.psgi for file updates.
13:33:16 web.1      | HTTP::Server::PSGI: Accepting connections at http://0:5000/
</code></pre>

<p>&mdash;colorオプションなどオプションは.foremanに定義することで省略可能。(.procletではないんだ!)</p>

<pre><code>$ cat .foreman
color: 1
</code></pre>

<p>Happy Hacking!</p>
]]></content>
  </entry>
  
</feed>
